{"ast":null,"code":"import React,{useState,useEffect}from'react';// Komponen ini menerima beberapa props dari HalamanUtama.js:\n// isOpen: boolean untuk membuka/menutup modal\n// onClose: fungsi untuk menutup modal\n// onSave: fungsi untuk menyimpan data\n// initialData: data transaksi jika dalam mode edit\n// categories: daftar kategori untuk ditampilkan di dropdown\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ModalTransaksi=_ref=>{let{isOpen,onClose,onSave,initialData=null,categories=[],accounts=[]}=_ref;const[formData,setFormData]=useState({description:'',amount:'',transaction_date:new Date().toISOString().slice(0,10),category_id:'',account_id:'',// Tambahkan akun untuk transaksi\ntype:'expense'// Tipe default adalah 'expense' (pengeluaran)\n});const[error,setError]=useState('');// useEffect ini akan berjalan setiap kali modal dibuka\nuseEffect(()=>{if(isOpen){if(initialData){// Jika ini mode EDIT, isi form dengan data yang sudah ada\nsetFormData({description:initialData.description||'',amount:initialData.amount||'',transaction_date:initialData.transaction_date?new Date(initialData.transaction_date).toISOString().slice(0,10):new Date().toISOString().slice(0,10),category_id:initialData.category_id||'',account_id:initialData.account_id||'',type:initialData.type||'expense'});}else{// Jika ini mode TAMBAH, reset form ke keadaan awal\nsetFormData({description:'',amount:'',transaction_date:new Date().toISOString().slice(0,10),category_id:'',account_id:'',type:(initialData===null||initialData===void 0?void 0:initialData.type)||'expense'});}setError('');// Selalu hapus pesan error setiap modal dibuka\n}},[initialData,isOpen]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=e=>{e.preventDefault();if(!formData.description||!formData.amount||!formData.transaction_date||!formData.account_id){setError('Harap isi Deskripsi, Jumlah, Akun, dan Tanggal.');return;}// Kategori hanya wajib jika tipenya 'expense'\nif(formData.type==='expense'&&!formData.category_id){setError('Kategori wajib diisi untuk pengeluaran.');return;}setError('');// Kirim data. Jika 'income', category_id akan kosong, backend akan handle sbg NULL.\nonSave({...formData,id:initialData===null||initialData===void 0?void 0:initialData.id});};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:initialData?'Edit Transaksi':'Tambah Transaksi'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Deskripsi\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"description\",value:formData.description,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Jumlah (Rp)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",value:formData.amount,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Akun\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"account_id\",value:formData.account_id,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Pilih Akun\"}),accounts.map(acc=>/*#__PURE__*/_jsxs(\"option\",{value:acc.id,children:[acc.name,\" (Rp \",Number(acc.balance).toLocaleString('id-ID'),\")\"]},acc.id))]})]}),formData.type==='expense'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Kategori\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",value:formData.category_id,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md\",required:true// Atribut required ini penting untuk pengeluaran\n,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Pilih Kategori\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},cat.id))]})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-gray-200 px-4 py-2 rounded-md\",onClick:onClose,children:\"Batal\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\",children:\"Simpan\"})]})]})]})});};export default ModalTransaksi;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ModalTransaksi","_ref","isOpen","onClose","onSave","initialData","categories","accounts","formData","setFormData","description","amount","transaction_date","Date","toISOString","slice","category_id","account_id","type","error","setError","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","id","className","children","onSubmit","onChange","required","map","acc","Number","balance","toLocaleString","cat","onClick"],"sources":["D:/xampp/htdocs/back/finance-trackerB/frontend/src/ModalTransaksi.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\n// Komponen ini menerima beberapa props dari HalamanUtama.js:\r\n// isOpen: boolean untuk membuka/menutup modal\r\n// onClose: fungsi untuk menutup modal\r\n// onSave: fungsi untuk menyimpan data\r\n// initialData: data transaksi jika dalam mode edit\r\n// categories: daftar kategori untuk ditampilkan di dropdown\r\nconst ModalTransaksi = ({ isOpen, onClose, onSave, initialData = null, categories = [],accounts = [] }) => {\r\n  const [formData, setFormData] = useState({\r\n    description: '',\r\n    amount: '',\r\n    transaction_date: new Date().toISOString().slice(0, 10),\r\n    category_id: '',\r\n    account_id: '', // Tambahkan akun untuk transaksi\r\n    type: 'expense', // Tipe default adalah 'expense' (pengeluaran)\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  // useEffect ini akan berjalan setiap kali modal dibuka\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      if (initialData) {\r\n        // Jika ini mode EDIT, isi form dengan data yang sudah ada\r\n        setFormData({\r\n          description: initialData.description || '',\r\n          amount: initialData.amount || '',\r\n          transaction_date: initialData.transaction_date ? new Date(initialData.transaction_date).toISOString().slice(0, 10) : new Date().toISOString().slice(0, 10),\r\n          category_id: initialData.category_id || '',\r\n          account_id: initialData.account_id || '',\r\n          type: initialData.type || 'expense',\r\n        });\r\n      } else {\r\n        // Jika ini mode TAMBAH, reset form ke keadaan awal\r\n        setFormData({\r\n          description: '',\r\n          amount: '',\r\n          transaction_date: new Date().toISOString().slice(0, 10),\r\n          category_id: '',\r\n          account_id: '', \r\n          type: initialData?.type || 'expense',\r\n        });\r\n      }\r\n      setError(''); // Selalu hapus pesan error setiap modal dibuka\r\n    }\r\n  }, [initialData, isOpen]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!formData.description || !formData.amount || !formData.transaction_date || !formData.account_id) {\r\n      setError('Harap isi Deskripsi, Jumlah, Akun, dan Tanggal.');\r\n      return;\r\n    }\r\n    // Kategori hanya wajib jika tipenya 'expense'\r\n    if (formData.type === 'expense' && !formData.category_id) {\r\n        setError('Kategori wajib diisi untuk pengeluaran.');\r\n        return;\r\n    }\r\n    setError('');\r\n    // Kirim data. Jika 'income', category_id akan kosong, backend akan handle sbg NULL.\r\n    onSave({ ...formData, id: initialData?.id });\r\n};\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md\">\r\n        <h2 className=\"text-lg font-semibold mb-4\">{initialData ? 'Edit Transaksi' : 'Tambah Transaksi'}</h2>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700\">Deskripsi</label>\r\n            <input\r\n              type=\"text\" name=\"description\" value={formData.description}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700\">Jumlah (Rp)</label>\r\n            <input\r\n              type=\"number\" name=\"amount\" value={formData.amount}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n              <label className=\"block text-sm font-medium text-gray-700\">Akun</label>\r\n              <select\r\n                name=\"account_id\" value={formData.account_id}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md\"\r\n                required\r\n              >\r\n                <option value=\"\">Pilih Akun</option>\r\n                {accounts.map(acc => (\r\n                  <option key={acc.id} value={acc.id}>{acc.name} (Rp {Number(acc.balance).toLocaleString('id-ID')})</option>\r\n                ))}\r\n              </select>\r\n          </div>\r\n          {formData.type === 'expense' && (\r\n          <div>\r\n              <label className=\"block text-sm font-medium text-gray-700\">Kategori</label>\r\n              <select\r\n                name=\"category_id\" value={formData.category_id}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md\"\r\n                required // Atribut required ini penting untuk pengeluaran\r\n              >\r\n                <option value=\"\">Pilih Kategori</option>\r\n                {categories.map(cat => (\r\n                  <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n          <div className=\"flex justify-end space-x-2 pt-2\">\r\n            <button type=\"button\" className=\"bg-gray-200 px-4 py-2 rounded-md\" onClick={onClose}>\r\n              Batal\r\n            </button>\r\n            <button type=\"submit\" className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\">\r\n              Simpan\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalTransaksi;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}